@using JsPlc.Ssc.Link.Models
@using JsPlc.Ssc.Link.Portal.Models
@using JsPlc.Ssc.Link.Portal.Properties


@*@using Microsoft.AspNet.Identity*@
@{
    var tab = TempData["tabName"];

    string tabName = (tab == null) ? "Welcome" : tab.ToString().ToLower();

    //var manager = new UserManager<ApplicationUser>(new Microsoft.AspNet.Identity.EntityFramework.UserStore<ApplicationUser>(new ApplicationDbContext()));
    //var currentUser = manager.FindById(User.Identity.GetUserId());
    var currentUser = TempData["CurrentUser"] as LinkUserView;
    if (currentUser != null)
    {
        ColleagueView colleague = currentUser.Colleague;
    }
}



@if (User.Identity.IsAuthenticated) {
    <br/>
    if ((currentUser != null && currentUser.IsLineManager))
    {
        <p class="lead">@Resources.TeamSectionHeader</p>
        <div class="list-group">
            <a href="/Team" class="list-group-item @(tabName == "team" ? "active" : "")">My team members</a>
            <a href="/Team/MeetingRecords" class="list-group-item @(tabName == "meetingrecords" ? "active" : "")">Conversation tracker</a>
        </div>
    }
    <p class="lead">@Resources.ColleagueSectionHeader</p>
    <div class="list-group">
        <a href="/Objective" class="list-group-item @(tabName == "objective" ? "active" : "")">My objectives</a>
        <a href="/Home/LinkMeetings" class="list-group-item @(tabName == "meetings" ? "active" : "")">Link conversations</a>
        <a href="/Pdp" class="list-group-item @(tabName == "pdp" ? "active" : "")">My personal development plan</a>
    </div>
}








