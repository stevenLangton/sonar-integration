@using JsPlc.Ssc.Link.Models
@using JsPlc.Ssc.Link.Portal.Models
@*@using Microsoft.AspNet.Identity*@
@{
    var tab = TempData["tabName"];

    string tabName = (tab == null) ? "Welcome" : tab.ToString().ToLower();

    //var manager = new UserManager<ApplicationUser>(new Microsoft.AspNet.Identity.EntityFramework.UserStore<ApplicationUser>(new ApplicationDbContext()));
    //var currentUser = manager.FindById(User.Identity.GetUserId());
    var currentUser = TempData["CurrentUser"] as LinkUserView;
    if (currentUser != null)
    {
        ColleagueView colleague = currentUser.Colleague;
    }
}


<div class="col-md-3">
@if (User.Identity.IsAuthenticated) {
    <br/>
    if ((currentUser != null && currentUser.IsLineManager))
    {
        <p class="lead">Line Management</p>
        <div class="list-group">
            <a href="/Team" class="list-group-item @(tabName == "team" ? "active" : "")">Your team</a>
            <a href="/Team/MeetingRecords" class="list-group-item @(tabName == "meetingRecords" ? "active" : "")">Meeting Records</a>
        </div>
    }
    <p class="lead">Your Development</p>
    <div class="list-group">
        <a href="/Objective" class="list-group-item @(tabName == "objective" ? "active" : "")">Objectives</a>
        <a href="/Home/LinkMeetings" class="list-group-item @(tabName == "meetings" ? "active" : "")">Link meetings</a>
        <a href="/Pdp" class="list-group-item @(tabName == "pdp" ? "active" : "")">PDP</a>
    </div>
}
</div>







