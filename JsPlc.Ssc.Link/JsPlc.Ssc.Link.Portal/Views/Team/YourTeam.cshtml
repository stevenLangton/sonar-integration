@{
    ViewBag.Title = "My team members";
}

<div id="linkpage" style="display: none;" data-bind="visible: true">
    <div>@Html.MvcSiteMap().SiteMapPath()</div>
    <span class="h2">Your Team</span>
    <br />
    <br />
    <div class="list-group" data-bind="foreach: teamMembers">
        <div class="media list-group-item">
            <div class="media-body">
                <div>
                    <span class="h3" data-bind="text: Colleague.FirstName + ' ' + Colleague.LastName"></span>
                    <a data-bind="attr: {'href': 'Profile/Show/'+Colleague.ColleagueId}" class="btn btn-default pull-right">
                        <span data-bind ="text: Colleague.FirstName + ' ' + Colleague.LastName"></span>
                    </a>
                </div>
                <br />
                <div>
                    You've had
                    <strong>
                        <span data-bind="text: (MeetingsInLast12Months == 0) ? 'no conversations ' :
                                    (MeetingsInLast12Months == 1) ? '1 conversation ' :
                                    (MeetingsInLast12Months + ' conversations ')"></span>
                    </strong>
                    with <span data-bind="text: Colleague.FirstName + ' ' + Colleague.LastName"></span> in the last 12 months.
                </div>
                <div data-bind="if: LastMeeting && LastMeeting.MeetingDate">
                    Last conversation: <strong><span data-bind="text: $root.meetingService.formatDateMonthDYHM(LastMeeting.MeetingDate)"></span></strong>
                </div>
                <div data-bind="if: !LatestMeeting" class="h4">
                    <strong>
                        You do not have any conversations scheduled with
                        <span data-bind="text: Colleague.FirstName + ' ' + Colleague.LastName"></span>
                    </strong>
                </div>
                <!-- Next conversation date -->
                <div data-bind="if: LatestMeeting" class="h4">
                    <strong>
                        Next conversation: <span data-bind="text: $root.meetingService.formatDateMonthDYHM(UpcomingMeetings[0].MeetingDate)"></span>
                    </strong>
                </div>
                <br />
                <!-- View conversation button -->
                <div data-bind="if: LatestMeeting">
                    <a data-bind="attr: {'href': $root.meetingService.getEditOrViewLink(UpcomingMeetings[0])}" class="btn btn-default">View Link conversation</a>
                </div>
                <div data-bind="if: !LatestMeeting && Meetings!== null">
                    <a data-bind="attr: {'href': $root.meetingService.getEditOrViewLink(Meetings[0])}" class="btn btn-default">View Link conversation</a>
                </div>
                <div data-bind="if:  Meetings === null">
                    <a data-bind="attr: {'href': 'LinkForm/Create/?colleagueId='+Colleague.ColleagueId}" class="btn btn-default">Arrange a Link conversation</a>
                </div>
                <br />
            </div>
        </div>
    </div>
    <hr />
</div>
<script type="text/javascript">
    require(["YourTeam"], function (lm) {
        $(document).ready(function () {
            lm.init();
        });
    });
</script>
